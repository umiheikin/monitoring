- hosts: localhost
  connection: local
  gather_facts: False
  vars:
    hostname: Monitoring-Server
    ec2_access_key: "{{ lookup('env', 'ansible_aws_access_key') }}"
    ec2_secret_key: "{{ lookup('env', 'ansible_aws_secret_key') }}"
    instance_type: "t2.micro"
    image: "ami-0badcc5b522737046"
    group: "SSH-HTTP-MONITORING"
    region: "eu-central-1"
  tasks:
    - name: make_one_instance
      ec2: image={{ image }}
           instance_type={{ instance_type }}
           aws_access_key={{ ec2_access_key }}
           aws_secret_key={{ ec2_secret_key }}
           instance_tags='{ "Name":"{{ hostname }}" }'
           region={{ region }}
           group={{ group }}
           wait=true
